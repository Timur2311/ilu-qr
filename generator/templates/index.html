{% load qr_code %}
{% load crispy_forms_tags %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>QR Code Generator</title>
    <script src="https://code.jquery.com/jquery-3.6.0.slim.js"
        integrity="sha256-HwWONEZrpuoh951cQD1ov2HUK5zA5DwJ1DNUXaM6FsY=" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">

    <style media="screen">
        *:before,
        *:after {
            padding: 0;
            margin: 0;
            box-sizing: border-box;
        }


        #popup {
            /* display: block; */
            width: 100%;
            height: 100vh;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 99;
            overflow: hidden;

        }

        .popupWrapper {
            background-color: #ccc;
            max-width: 600px;
            width: 100%;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border: 1px solid #f6f6;
        }

        .popupHeader {
            width: 100%;
            padding: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #f6f6;
        }

        button {
            width: 24px;
            height: 24px;
            border: 1px solid #f6f6;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #fff;
        }

        .popupBody {
            text-align: center;
        }
    </style>
</head>


<body>

    <div id="popup" onclick="btnClose()">
        <div class="popupWrapper">
            <div class="popupHeader">
                <h2>Eslatma !</h2>
                <button type="button" onclick="btnClose()">&times;</button>
            </div>
            <div class="popupBody">
                <h3>
                    Ushbu websayt Tashbayeva Hulkaroy Xolmurod qiziga tegishli. Mualliflik huquqi himoyalangan.
                </h3>
            </div>
        </div>
    </div>




    </script>

    <h1 class="h1" style="text-align: center; margin-top: 50px">
        Information Land Use
    </h1>
    <div class="container shadow" style="width: 400px; margin-top: 1em; padding: 2em">

        <form style="text-align:center" enctype="multipart/form-data" method="POST" action="">
            <div class="input-group mb-3 text-center">
                {% csrf_token %}
                {{form.as_p}}

            </div>
            <input type="submit" style="max-width: 200px; margin: auto" class="form-control" value="QR-code yasash">
        </form>

        <div class="input-group mb-3">
            {% if last_file %}
            <div style="margin: auto">
                <img src="{% qr_url_from_text last_file options=my_options %}" alt="Hello World!">
            </div>
            {% else %}
            <div style="margin: auto">
                <img src="{% qr_url_from_text last_file options=my_options %}" alt="Hello World!">
            </div>
            {% endif %}
        </div>
        <div class="text-center">
            {% if last_file %}
            <a class="btn btn-primary" role="button" href="{% qr_url_from_text last_file options=my_options %}"
                download="{{name}}">Yuklab olish</a>
            {% endif %}
        </div>
    </div>
    <script>
        var modal = document.getElementById("popup")
        function save(value) {
            localStorage.setItem('modalValue', value)
        }
        const get = localStorage.getItem('modalValue')


        function btnClose() {
            modal.style.display = "none"
            save(true)
        }
        function load() {
            if (!get) {
                modal.style.display = "block"
                save(true)
            }
            else {
                btnClose()
            }
        }

        load()
    </script>
</body>

</html>